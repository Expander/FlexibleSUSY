#!/bin/sh

tanb_npoints=10
m0_npoints=10

scan_MSSM() {
    echo -n "scanning MSSM ... "
    ./higgs-study/scan_MSSM.x --tanb-npoints=${tanb_npoints} --m0-npoints=${m0_npoints} > higgs-study/data/scan_MSSM.dat
    echo "done"
}

scan_NMSSM() {
    if test $# -ne 1 ; then
        echo "scan_NMSSM: Too few arguments"
        return 1
    fi

    lambda="$1"

    echo -n "scanning NMSSM (lambda=${lambda}) ... "
    ./higgs-study/scan_NMSSM.x --lambda=${lambda} --tanb-npoints=${tanb_npoints} --m0-npoints=${m0_npoints} > higgs-study/data/scan_NMSSM_lambda-${lambda}.dat
    echo "done"
}

scan_phdUMSSM() {
    if test $# -ne 2 ; then
        echo "scan_phdUMSSM: Too few arguments"
        return 1
    fi

    lambda="$1"
    vs="$2"

    echo -n "scanning phdUMSSM (lambda=${lambda}, vs=${vs}) ... "
    ./higgs-study/scan_phdUMSSM.x --lambda=${lambda} --vs=${vs} --tanb-npoints=${tanb_npoints} --m0-npoints=${m0_npoints} > higgs-study/data/scan_phdUMSSM_lambda-${lambda}_vs-${vs}.dat
    echo "done"
}

scan_phdE6SSM() {
    if test $# -ne 3 ; then
        echo "scan_phdE6SSM: Too few arguments"
        return 1
    fi

    lambda="$1"
    vs="$2"
    kappa="$3"

    echo -n "scanning phdE6SSM (lambda=${lambda}, vs=${vs}, kappa=${kappa}) ... "
    ./higgs-study/scan_phdE6SSM.x --lambda=${lambda} --vs=${vs} --kappa=${kappa} --tanb-npoints=${tanb_npoints} --m0-npoints=${m0_npoints} > higgs-study/data/scan_phdE6SSM_lambda-${lambda}_vs-${vs}_kappa-${kappa}.dat
    echo "done"
}

help() {
cat <<EOF
Usage: ./`basename $0` [options]
Options:

  --help,-h         Print this help message

  --tanb-npoints=   number of tan(beta) points
  --m0-npoints=     number of m0 points
EOF
}

if test $# -gt 0 ; then
    while test ! "x$1" = "x" ; do
        case "$1" in
            -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
            *) optarg= ;;
        esac

        case $1 in
            --tanb-npoints=*)        tanb_npoints=$optarg ;;
            --m0-npoints=*)          m0_npoints=$optarg ;;
            --help|-h)               help; exit 0 ;;
            *)  echo "Invalid option '$1'. Try $0 --help" ; exit 1 ;;
        esac
        shift
    done
fi

echo "# number of tan(beta) points: ${tanb_npoints}"
echo "# number of m0 points:        ${m0_npoints}"

scan_MSSM

# lambda
scan_NMSSM 0.1
scan_NMSSM 0.2
scan_NMSSM 0.4
scan_NMSSM 0.6
scan_NMSSM 0.8
scan_NMSSM 1.0

# lambda vs
scan_phdUMSSM 0.1 10000
scan_phdUMSSM 0.2 10000
scan_phdUMSSM 0.4 10000
scan_phdUMSSM 0.6 10000
scan_phdUMSSM 0.8 10000
scan_phdUMSSM 1.0 10000

# lambda vs kappa
scan_phdE6SSM 0.1 10000 0.1
scan_phdE6SSM 0.2 10000 0.1
scan_phdE6SSM 0.4 10000 0.1
scan_phdE6SSM 0.6 10000 0.1
scan_phdE6SSM 0.8 10000 0.1
scan_phdE6SSM 1.0 10000 0.1

scan_phdE6SSM 0.1 10000 0.2
scan_phdE6SSM 0.2 10000 0.2
scan_phdE6SSM 0.4 10000 0.2
scan_phdE6SSM 0.6 10000 0.2
scan_phdE6SSM 0.8 10000 0.2
scan_phdE6SSM 1.0 10000 0.2

scan_phdE6SSM 0.1 10000 0.4
scan_phdE6SSM 0.2 10000 0.4
scan_phdE6SSM 0.4 10000 0.4
scan_phdE6SSM 0.6 10000 0.4
scan_phdE6SSM 0.8 10000 0.4
scan_phdE6SSM 1.0 10000 0.4

scan_phdE6SSM 0.1 10000 0.6
scan_phdE6SSM 0.2 10000 0.6
scan_phdE6SSM 0.4 10000 0.6
scan_phdE6SSM 0.6 10000 0.6
scan_phdE6SSM 0.8 10000 0.6
scan_phdE6SSM 1.0 10000 0.6

scan_phdE6SSM 0.1 10000 0.8
scan_phdE6SSM 0.2 10000 0.8
scan_phdE6SSM 0.4 10000 0.8
scan_phdE6SSM 0.6 10000 0.8
scan_phdE6SSM 0.8 10000 0.8
scan_phdE6SSM 1.0 10000 0.8

scan_phdE6SSM 0.1 10000 1.0
scan_phdE6SSM 0.2 10000 1.0
scan_phdE6SSM 0.4 10000 1.0
scan_phdE6SSM 0.6 10000 1.0
scan_phdE6SSM 0.8 10000 1.0
scan_phdE6SSM 1.0 10000 1.0
